<div class="user-page">
  <div class="header-bar">
    <h2>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
    <button class="btn-add" (click)="startAdd()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
  </div>

  <div *ngIf="loading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö‚Ä¶</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <div class="user-table-wrapper" *ngIf="!loading && accounts.length">
    <table class="user-table">
      <thead>
        <tr>
          <th>–ò–º—è</th>
          <th>–§–∞–º–∏–ª–∏—è</th>
          <th>–û—Ç—á–µ—Å—Ç–≤–æ</th>
          <th>–õ–æ–≥–∏–Ω</th>
          <th>–†–æ–ª—å</th>
          <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let acc of accounts">
          <td data-label="–ò–º—è">{{ acc.first_name }}</td>
          <td data-label="–§–∞–º–∏–ª–∏—è">{{ acc.last_name }}</td>
          <td data-label="–û—Ç—á–µ—Å—Ç–≤–æ">{{ acc.patronymic }}</td>
          <td data-label="–õ–æ–≥–∏–Ω">{{ acc.login }}</td>
          <td data-label="–†–æ–ª—å">{{ acc.Role.name_of_role }}</td>
          <td data-label="–î–µ–π—Å—Ç–≤–∏—è">
            <button class="btn-edit" (click)="startEdit(acc)">‚úé</button>
            <button class="btn-delete" (click)="deleteAccount(acc)">üóë</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
  <div class="modal-backdrop" *ngIf="editingAccount"></div>
  <div class="modal" *ngIf="editingAccount">
    <h3>{{ editingAccount.id ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å' : '–î–æ–±–∞–≤–∏—Ç—å' }} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>

    <form [formGroup]="form" (ngSubmit)="save()">
      <label>–ò–º—è</label>
      <input type="text" formControlName="first_name" />

      <label>–§–∞–º–∏–ª–∏—è</label>
      <input type="text" formControlName="last_name" />

      <label>–û—Ç—á–µ—Å—Ç–≤–æ</label>
      <input type="text" formControlName="patronymic" />

      <label>–õ–æ–≥–∏–Ω</label>
      <input type="text" formControlName="login" />

      <label>–ü–∞—Ä–æ–ª—å</label>
      <input type="password" formControlName="password" />

      <label>–†–æ–ª—å</label>
      <select formControlName="role_id">
        <option [ngValue]="null" disabled>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</option>
        <option *ngFor="let role of roles" [ngValue]="role.id">{{ role.name_of_role }}</option>
      </select>

      <div class="buttons">
        <button type="submit" [disabled]="form.invalid">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button type="button" (click)="closeModal()">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </form>
  </div>
</div>
